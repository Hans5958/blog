---
import { Icon } from "astro-icon/components"
import { getCategories } from "../../components/getPosts.js"
import relativeUrl from '../../components/urlHelper.js'
import ArchiveIndex from '../../layouts/ArchiveIndex.astro'

const categories = await getCategories()
---

<ArchiveIndex title="Category">
	<div class="flex flex-wrap">
		{ Object.entries(categories).map(([ id, data ]) => (<>
			<a href={ relativeUrl('/category/' + id) } class="flex flex-row px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 focus:bg-gray-100 active:bg-gray-200 focus:ring focus:ring-blue-500 focus:outline-none active:outline-none mr-2 mb-2" >
				<Icon name="fa6-solid:folder" class="w-6 h-6 mr-2"></Icon>
				<div class="-mt-[.1rem] align-middle text-lg font-semibold mr-2">{ data.name }</div>
				<div class="mt-[.2rem] text-sm text-gray-500">{ data.posts.length } posts</div>
			</a>
		</>)) }	
	</div>
</ArchiveIndex>
